package test:helper-client;

interface test-helper-client {
  use wasi:io/poll@0.2.0.{ pollable as wasi-io-pollable };
  use wasi:clocks/wall-clock@0.2.0.{ datetime as wasi-clocks-datetime };
  use golem:rpc/types@0.2.0.{ component-id as golem-rpc-component-id, worker-id as golem-rpc-worker-id, cancellation-token as golem-rpc-cancellation-token };
  resource future-inc-and-get-result {
    subscribe: func() -> wasi-io-pollable;
    get: func() -> option<u64>;
  }
  resource test-helper-api {
    constructor(worker-name: string);
    custom: static func(worker-id: golem-rpc-worker-id) -> test-helper-api;
    blocking-inc-and-get: func() -> u64;
    inc-and-get: func() -> future-inc-and-get-result;
    schedule-inc-and-get: func(scheduled-for: wasi-clocks-datetime) -> golem-rpc-cancellation-token;
  }
}

world wasm-rpc-client-test-helper {
  export test-helper-client;
}
